
日活亿级的负载均衡架构如何搭建？ 
阅读 941 
收藏 41 
2019-01-30 
原文链接：mp.weixin.qq.com 
引言 
本来没想写这个题材的，为了某某童鞋能够更好的茁壮成长，临时写一篇负载
均衡的。负载均衡，大家可能听过什么 3 层负载均衡、4 层负载均衡、7 层负载
均衡什么的？那这是怎么分的呢，ok，是根据 osi 七层网络模型来分的，例如
nginx 是工作在应用层，应用层刚好是在第 7 层，因此 nginx 又可以称为 7 层
负载均衡。我本来想一层层慢慢讲，从最基础的网络协议开始讲起，想了想又
觉得这种讲法不适合速成。因此我改变思路，直接讲负载均衡架构的演进，最
后的成品就可以在面试中侃一侃，因为现在负载均衡基本都是这套架构！。 
正文 
DNS 
开始呢，我们的应用只有一台 web-server。那么你希望:
输入 guduyan.com 就
能定位该 server!
  
那很简单，只要在 DNS 里配上域名和你的 server 映射关系，就能访问到啦！流
程如下图所示 
 
好，现在呢，多了一台 web-server，你就可以通过在 DNS 里加一条配置，以
DNS 轮询方式进行负载均衡。如下图所示 
 
Nginx+DNS 
现在假设，我们多了一些需求啊。你的系统按照功能模块拆成两个系统:用户系
统和订单系统。那么你希望
输入 guduyan.com/user/的时候定位到用户系统。
输入 guduyan.com/order/的时候定位到订单系统。
 
那这时候，光靠 DNS 就不行了，就需要采用 DNS+nginx 进行负载均衡！如下图
所示 
